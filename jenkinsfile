pipeline {
    agent any
    tools {nodejs "nodejs-jenkins"}
    stages{
      stage("SCM"){
          steps {
             git(branch: 'qa', credentialsId: '44feaac4-248a-4a31-bdfc-dc372382fbb1', url: 'https://github.com/nehalBaigSystemLtd/SystemLtd-Form')
             sh 'ls -lrt'
          }
      }
      stage("build"){
          steps {
            sh 'npm install'
          }
      }
      stage("test"){
          steps {
            sh 'npm run unit'
          }
      }
      stage("deploy"){
          steps {
            sh 'echo NPM DEPLOY'
            publishHTML([allowMissing: false, alwaysLinkToLastBuild: false, keepAll: false, reportDir: './UnitTestReport.html', reportFiles: 'UnitTestReport.html', reportName: 'Unit Test Report', reportTitles: 'Unit Test Report'])          }
      }
    }
}
